<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


     <!-- Instalise Leaflet Map Header -->
     <title>Californian Checkerboard Effects</title>

     
     <!--  <script text="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>-->


     <!-- Include Leaflet CSS -->
     <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
     <!-- Include Leaflet JavaScript  -->
     <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
     <!-- Instalise Leaflet Map Header ENDOF -->

     <!-- Include Esri Leaflet JavaScript -->
    <script src="https://unpkg.com/esri-leaflet/dist/esri-leaflet.js"></script>


  


    <style>
   

        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
           /*  overflow: hidden;*/
        }


        Fixed background 
        .welcome-background {
             
            height: 100vh;
            width: 100%;
            top: 0;
            left: 0;
            z-index: -1;
             
           
        }
       

        /* Fixed background   */
        .background {
             /*
           
            background-size: cover;
            background-position: center;
            */
            height: 100vh;
            width: 100%;
            position: sticky;
            top: 0;
            left: 0;
          
         
        
        }

        /* Fullscreen button */
        .fullscreen-button {
            position: fixed;
            top: 20px;
            right: 20px;
            
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            z-index: 1;
            
        }

      /* Additional style for creating a gap between successive info boxes */
        .gap-div {
            margin-bottom: 85vh; /* Adjust the value as needed for the desired gap */
        }



        /* Info boxes container */
        .info-container {
            
            
            overflow: auto;
            
           
}



    .part-sticky-box-wrapper {
           
           
        }

    .sticky-box {
        padding-top: 50vh;
        position: relative;
            left: 40%; /* Offset from the left by 25% */
            width: 40%;
            /*  height: 100vh;*/
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 3px;
            box-sizing: border-box; /* Include padding in width calculation */
            z-index: 1;
        }
        .sticky-box2{
            position: sticky;
        }

        .chapter-box{
            position: sticky;
            background: rgba( 255, 255, 255, 0.25 );
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    backdrop-filter: blur( 4px );
    -webkit-backdrop-filter: blur( 4px );
 
    border: 1px solid rgba( 255, 255, 255, 0.18 );
    width: 100%;
  
        }



        .info-box {
            position: relative;
           /* left: 15%;  Offset from the left by 25% 
            width: 25%;*/
            left: 3%;
            width: 35%;
            /*  height: 100vh;*/
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 3px;
            box-sizing: border-box; /* Include padding in width calculation */
            z-index: 1;
   
            background: rgba( 0, 0, 0, 0.1 );
box-shadow: 0 8px 32px 0 rgba( 31, 38, 135, 0.37 );
backdrop-filter: blur( 5px );
-webkit-backdrop-filter: blur( 5px );
border-radius: 10px;
border: 1px solid rgba( 255, 255, 255, 0.18 );
        }
        








    </style>
</head>
<body>
    <!-- Fixed background -->

    <div class="welcome-background"> 

    <img src="titleimage.png" style=" width: 100%;
    " alt="Full Screen Image">

</div>


<div class="scroll-trigger" data-lat="0" data-lng="0" data-zm="2">




    

</div>
    <div class="background"> 
        
     <!-- Create a div for the map  -->
     <div id="map" style="height: 100vh;"></div>

     <!--     <img src="C:\Users\lewis\OneDrive - Durham University\Pictures\desert memorable\20220731_194245.jpg" style=" width: 100%;
        height: 100vh;" alt="Full Screen Image"> -->
    </div>

    <!-- Fullscreen button -->
    <button class="fullscreen-button" onclick="toggleFullscreen()">Full Screen</button>

    <!-- Info boxes container -->
    <div class="info-container">
        

        <div class="scroll-trigger" data-lat="38.106" data-lng="-121.414" data-zm="8">
        </div>
        <div class="info-box">
            <h2>California</h2>
            <p>Almost a wonder of the world.</p>
        </div>
        

        <div class="gap-div"></div>

        <div class="chapter-box" style="text-align: center;"> 
           
            <p style="top: 50%; font-size: 2em;"> Chapter 1: <b>The Creation of the Checkerboards</b></p>
        </div>



        <div class="gap-div"></div>

        <div class="info-box">
            <div class="scroll-trigger" data-lat="20.212" data-lng="-98.351" data-zm="3"> </div>
            <div class="scroll-MAPSHOWSAIL"> </div>
            <h2>Travel</h2>
            <p>Travellers to California from the rest of the US would have to undertake a sailing voyage and travel through central america (Rogers, n.d.). This resulted in poor interconnectivity, and two functionally non-contiguous lands. There was a keen interest in solving the issue.</p>
        
        </div>

        <div class="gap-div"></div>

        <div class="scroll-trigger" data-lat="35.212" data-lng="-98.351" data-zm="5"> </div>

        
        <div class="gap-div"></div>

        <div class="scroll-MAPSHOWRAIL"> </div>
        <div class="info-box">
            <h2>Land Grants</h2>
            <p>AUsing non-monetary means to encourage its constriction, the US government announced it would grant the Railroad firm 20 miles of land either side of the rails, which it could sell and use to recoup the costs of construction. This land was desirable, given the new interconnectivity directly beside it.</p>
        
        </div>


        
        <div class="gap-div"></div>

       
        <div class="scroll-trigger" data-lat="35.106" data-lng="-120.414" data-zm="6"></div>
        <div class="info-box">
            <h2>Land Grants in California</h2>
            <p>As can be seen in California, the rail and granted land cuts directly through its centre, having a substantial impact.</p>
     </div>

     <div class="info-box"><h2>TEst</h2><p>Test</p></div>
        <div class="gap-div"></div>

       

        <div class="chapter-box" style="text-align: center;"> 
            <div class="scroll-Removeall"> </div>
            <div class="scroll-trigger" data-lat="40.106" data-lng="-130.414" data-zm="6"></div>
            <p style="top: 50%; font-size: 2em;"> Part 2: <b>Concequences of Checkerboarding</b></p>
        </div>


        <div class="gap-div"></div>
        <div class="info-box"><h2>TEst</h2><p>Test</p></div>
        <div class="scroll-trigger" data-lat="41.0327" data-lng="-122.1024" data-zm="13"></div>
        <div class="gap-div"></div>
        
        <div class="info-box"><h2>TEst</h2><p>Test</p></div>
        <div class="scroll-trigger" data-lat="41.0108" data-lng="-122.0495" data-zm="11"></div>
        <div class="gap-div"></div>

        <div class="info-box"><h2>TEst</h2><p>Test</p></div>
        <div class="scroll-trigger" data-lat="41.4575" data-lng="-122.0433" data-zm="11"></div>
        <div class="gap-div"></div>

        <div class="info-box"><h2>TEst</h2><p>Test</p></div>
        <div class="scroll-trigger" data-lat="40.8352" data-lng="-122.698" data-zm="12"></div>
        <div class="gap-div"></div>
     
        


        <div class="chapter-box" style="text-align: center;"> 
            <p style="top: 50%; font-size: 2em;"> Part 3: <b>Modelling Checkerboard Size Effects</b></p>
        </div>
        <div class="gap-div"></div>
        <div class="info-box"><h2>Model Access</h2><p>The model can be downloaded to be run locally at this link: <a href="CaliforniaCheckerboardSimulation.nlogo"> Download model</a> </p> </br> <p>It can also be accessed online, however the online viewer may fail to display it correctly. The online version opens in a new tab. Please return here, or the the main PebblePad site, after completion. <a href="CaliforniaCheckerboardSimulation.html"> Online viewer</a></p></div>

       
        <div class="gap-div"></div>
        <div class="gap-div"></div>
        <div class="gap-div"></div>
        <div class="scroll-MAPSHOWSAIL"> </div>
        
    </div>

    

    <script>
        function toggleFullscreen() {
            const background = document.querySelector('.background');
            const infoContainer = document.querySelector('.info-container');
            const fullscreenButton = document.querySelector('.fullscreen-button');

            if (!document.fullscreenElement) {
    
                fullscreenButton.textContent = 'Exit Full Screen';
                document.documentElement.requestFullscreen();
            } else {

                fullscreenButton.textContent = 'Full Screen';
                document.exitFullscreen();
            }
        }


  
    </script>


     <script>
         // Initialize the map
           // Initialize the map with scrollWheelZoom set to false
           var map = L.map('map', { scrollWheelZoom: false }).setView([0, 0], 2);
 
         // Add a tile layer (OpenStreetMap)
       const TyleLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
             attribution: '© OpenStreetMap contributors'

         }).addTo(map);
       
         L.esri.basemapLayer('Imagery').addTo(map);

 
       function showRail() {
        loadImage2()
    }

    function showSail() {
    loadImage1()
}
      


var image1Url = 'sailingroute.jpg',
    image1Bounds = [["49.7758", "-125.4533"], ["4.1580810509", "-68.0090537768"]],
    image1 = L.imageOverlay(image1Url, image1Bounds);

var image2Url = 'acrossrail.jpg',
    image2Bounds = [["49.7758", "-130.4533"], ["10.1580810509", "-68.0090537768"]],
    image2 = L.imageOverlay(image2Url, image2Bounds);

function loadImage1(e) {
  // remove image layer if it already exists
  if (map.hasLayer(image2)) {
    map.removeLayer(image2);
  }
  if (map.hasLayer(image1)) {
  } else {
    image1.addTo(map);
  }
}

function loadImage2(e) {
  // remove image layer if it already exists
  if (map.hasLayer(image1)) {
    map.removeLayer(image1);
  }
  if (map.hasLayer(image2)) {
  } else {
    image2.addTo(map);
  }
}


function removeall(e) {
  // remove image layer if it already exists
  if (map.hasLayer(image1)) {
    map.removeLayer(image1);
  }
  if (map.hasLayer(image2)) {
    map.removeLayer(image2);
  }
}

       globalThis.isON = "no";
    




       function panToCoordinate(lat, lng, zm) {
    map.flyTo([lat, lng], zm);
}

function isVerticallyCentered(element) {
    var rect = element.getBoundingClientRect();
    var windowHeight = window.innerHeight || document.documentElement.clientHeight;
    return Math.abs(rect.top - windowHeight / 2) < windowHeight / 4;
}






function handleScroll() {
    var targetDivsSHOWSAIL = document.querySelectorAll('.scroll-MAPSHOWSAIL');
    var targetDivsSHOWRAIL = document.querySelectorAll('.scroll-MAPSHOWRAIL');
    var targetDivs = document.querySelectorAll('.scroll-trigger');
   var targetdivsRemoveall = document.querySelectorAll('.scroll-Removeall');

    targetDivs.forEach(function(targetDiv) {
        if (isVerticallyCentered(targetDiv)) {
            var lat = parseFloat(targetDiv.dataset.lat);
            var lng = parseFloat(targetDiv.dataset.lng);
            var zm = parseFloat(targetDiv.dataset.zm);
            panToCoordinate(lat, lng, zm);
        }
    });

    targetDivsSHOWSAIL.forEach(function(targetdivsSHOWSAIL) {
        if (isVerticallyCentered(targetdivsSHOWSAIL)) {
            showSail();
        }
});

targetDivsSHOWRAIL.forEach(function(targetdivsSHOWRAIL) {
        if (isVerticallyCentered(targetdivsSHOWRAIL)) {
            showRail();
        }
});
targetdivsRemoveall.forEach(function(targetdivsRemoveall) {
        if (isVerticallyCentered(targetdivsRemoveall)) {
            removeall();
        }
});
       

    
   
}

// Attach the scroll event listener
window.addEventListener('scroll', handleScroll);

     </script>

</body>
</html>
